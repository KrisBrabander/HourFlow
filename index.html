<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HourFlow Premium - Complete Freelancer Suite</title>

  <!-- Umami Analytics -->
  <script defer src="https://cloud.umami.is/script.js" data-website-id="302cd0f7-976d-421f-8e7e-5fc3b9d60e60"></script>

  <!-- License and Authentication Check -->
  <script>
    (function() {
      const params = new URLSearchParams(window.location.search);
      if (params.get('license')) {
        console.log('License found in URL, saving...');
        localStorage.setItem('hourflow_license', params.get('license'));
        localStorage.setItem('hourflow_verified_license', params.get('license'));
      }

      const license = localStorage.getItem('hourflow_license');
      const verified = localStorage.getItem('hourflow_verified_license');
      const isDevMode = localStorage.getItem('devMode') === 'true' && 
                        (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1');

      if (!license || !verified || license !== verified) {
        if (!isDevMode) {
          console.log('License check failed, redirecting...');
          window.location.href = './license.html';
        } else {
          console.log('Dev mode active, skipping license check.');
        }
      } else {
        console.log('License verified, access granted.');
      }
    })();
  </script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <!-- jsPDF Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>

  <!-- Your own CSS -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- Your app HTML content here -->

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBrMzcoCMN9tXROYdJCMq9iT9NX5IW_fqE",
      authDomain: "hourflow-54a34.firebaseapp.com",
      projectId: "hourflow-54a34",
      storageBucket: "hourflow-54a34.appspot.com",
      messagingSenderId: "582955946179",
      appId: "1:582955946179:web:e97d00b0036ff362379276",
      measurementId: "G-ZNGXWM3FMF"
    };

    firebase.initializeApp(firebaseConfig);
    firebase.analytics();

    document.addEventListener('DOMContentLoaded', function() {
      const logoutButton = document.getElementById('logout-button');
      if (logoutButton) {
        logoutButton.addEventListener('click', function() {
          firebase.auth().signOut().then(() => {
            console.log('User signed out successfully');
            window.location.href = 'login.html';
          }).catch((error) => {
            console.error('Error signing out:', error);
          });
        });
      }
    });
  </script>

  <!-- Your app's JavaScript files -->
  <script src="app.js"></script>
  <script src="clients.js"></script>
  <script src="projects.js"></script>
  <script src="time-tracker.js"></script>
  <script src="quotes.js"></script>
  <script src="invoices.js"></script>
  <script src="pdf-generator.js"></script>
  <script src="license-check.js"></script>
  <script src="revenue-manager.js"></script>

</body>
</html>
